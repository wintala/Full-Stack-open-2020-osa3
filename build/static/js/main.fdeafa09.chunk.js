(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),l=n.n(r),u=(n(20),n(4)),o=n(2),s=n(3),i=n.n(s),m="/api/persons",f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e){i.a.delete("".concat(m,"/").concat(e))},b=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},h=function(){return i.a.get(m).then((function(e){return e.data}))},E=function(e){var t=e.person,n=e.deleteFunc;return c.a.createElement("li",null,t.name," ",t.number,c.a.createElement("button",{onClick:function(){return n(t.id)}},"Delete"))},p=function(e){var t=e.persons,n=e.filter,a=e.deleteFunc,r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return c.a.createElement("div",null,c.a.createElement("h2",null,"Numbers"),c.a.createElement("ul",null," ",r.map((function(e){return c.a.createElement(E,{key:e.name,person:e,deleteFunc:a})}))," "))},v=function(e){var t=e.newName,n=e.handleNewName,a=e.newNumber,r=e.handleNewNumber,l=e.handleNewPerson;return c.a.createElement("div",null,c.a.createElement("h2",null,"Add new"),c.a.createElement("form",{onSubmit:l},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t,onChange:n})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:a,onChange:r})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},C=function(e){var t=e.filter,n=e.handleFilterChange;return c.a.createElement("form",null,c.a.createElement("div",null,"set filter: ",c.a.createElement("input",{value:t,onChange:n})))},N=function(e){var t=e.text,n=e.cssClass,a=e.setMessage;return null===t?null:(setTimeout((function(){a({text:null,cssClass:null})}),3e3),c.a.createElement("div",{className:n},t))},w=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(""),s=Object(o.a)(l,2),i=s[0],m=s[1],E=Object(a.useState)(""),w=Object(o.a)(E,2),g=w[0],j=w[1],x=Object(a.useState)(""),O=Object(o.a)(x,2),k=O[0],S=O[1],F=Object(a.useState)({text:null,cssClass:null}),y=Object(o.a)(F,2),D=y[0],M=y[1];Object(a.useEffect)((function(){h().then((function(e){r(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(N,{text:D.text,cssClass:D.cssClass,setMessage:M}),c.a.createElement(C,{filter:k,handleFilterChange:function(e){S(e.target.value)}}),c.a.createElement(v,{newName:i,handleNewName:function(e){m(e.target.value)},newNumber:g,handleNewNumber:function(e){j(e.target.value)},handleNewPerson:function(e){e.preventDefault();var t=n.map((function(e){return e.name})),a=n.map((function(e){return e.number}));t.includes(i)?a.includes(g)?M({text:"Cannot change ".concat(i,"'s number. Number ").concat(g," is already taken"),cssClass:"fail"}):function(e,t){var a=n.find((function(t){return t.name===e}));b(a.id,Object(u.a)(Object(u.a)({},a),{},{number:t})).then((function(e){r(n.map((function(t){return t.id!==a.id?t:e}))),M({text:"".concat(i,"'s number changed"),cssClass:"notification"})})).catch((function(e){M({text:"".concat(i," has been removed from the server"),cssClass:"error"})}))}(i,g):a.includes(g)?M({text:"Number ".concat(g," is already taken"),cssClass:"fail"}):f({name:i,number:g}).then((function(e){r(n.concat(e)),M({text:"Added ".concat(i),cssClass:"notification"})})).catch((function(e){M({text:e.response.data.error,cssClass:"error"})}))}}),c.a.createElement(p,{persons:n,filter:k,deleteFunc:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&(d(e),r(n.filter((function(t){return t.id!==e}))),M({text:"".concat(t," deleted from phonebook"),cssClass:"notification"}))}}))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fdeafa09.chunk.js.map